<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Quản lý sinh viên</title>
        <html xmlns:th="http://www.thymeleaf.org"></html>
        <link
            rel="stylesheet"
            href="../static/assets/css/reset.css"
            th:href="@{/assets/css/reset.css}"
        />
        <link
            rel="stylesheet"
            href="../../static/assets/css/common.css"
            th:href="@{/assets/css/common.css}"
        />
        <link
            rel="stylesheet"
            href="../../static/assets/css/me-style.css"
            th:href="@{/assets/css/me-style.css}"
        />
        <link
            rel="stylesheet"
            href="../../static/assets/css/reponsive.css"
            th:href="@{/assets/css/reponsive.css}"
        />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
            integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <!-- Embed Font -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap"
            rel="stylesheet"
        />
        <style>
            /* CSS cho nút tìm kiếm */
            .search-button {
                padding: 10px 20px; /* Độ lớn của nút */
                background-color: var(--primary-color);/* Màu nền của nút */
                color: white; /* Màu chữ của nút */
                border: none; /* Không có viền */
                border-radius: 5px; /* Bo tròn các góc */
                cursor: pointer; /* Con trỏ hiển thị khi rê chuột vào nút */
            }
        
            /* Hover state cho nút */
            .search-button:hover {
                background-color: #0056b3; /* Màu nền khi hover */
            }
        </style>
    </head>
    <body>
        <!--Mobile controller wrapper  -->
        <div class="mobile-controller-wrapper">
            <div class="mobile-overlay"></div>
            <div class="mobile-controller">
                <div class="logo-wrapper">
                    <img
                        src="../static/assets/img/multi-dot.svg"
                        alt=""
                        th:src="@{/assets/img/multi-dot.svg}"
                    />
                    <span class="admin-text">Admin</span>
                </div>
                <ul class="feature-list">
                    <li data-name="lophoc">
                        <a class="item" href="/admin/classes">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="28"
                                viewBox="0 0 24 28"
                                fill="none"
                                class="icon"
                            >
                                <path
                                    d="M12 21.4073C11.59 21.4073 11.25 21.0363 11.25 20.5889V17.3156C11.25 16.8682 11.59 16.4973 12 16.4973C12.41 16.4973 12.75 16.8682 12.75 17.3156V20.5889C12.75 21.0363 12.41 21.4073 12 21.4073Z"
                                    fill="currentColor"
                                />
                                <path
                                    d="M17.6 25.5644H6.39996C4.57996 25.5644 2.91996 24.0368 2.61996 22.0837L1.28996 13.3876C1.06996 12.0346 1.67996 10.2997 2.66996 9.43775L9.59996 3.38209C10.94 2.20369 13.05 2.2146 14.4 3.393L21.33 9.43775C22.31 10.2997 22.91 12.0346 22.71 13.3876L21.38 22.0728C21.08 24.0041 19.38 25.5644 17.6 25.5644ZM11.99 4.14586C11.46 4.14586 10.93 4.32044 10.54 4.65869L3.60996 10.7253C3.04996 11.2163 2.64996 12.351 2.76996 13.1257L4.09996 21.811C4.27996 22.9566 5.32996 23.9277 6.39996 23.9277H17.6C18.67 23.9277 19.72 22.9566 19.9 21.8L21.23 13.1148C21.34 12.351 20.94 11.1944 20.39 10.7144L13.46 4.6696C13.06 4.32044 12.52 4.14586 11.99 4.14586Z"
                                    fill="currentColor"
                                />
                            </svg>
                            <span class="text">Quản lý lớp học</span>
                        </a>
                    </li>
                    <li data-name="student">
                        <a
                            class="item"
                            href="/admin/student"
                            style="color: white"
                        >
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="27"
                                viewBox="0 0 24 27"
                                fill="none"
                                class="icon"
                            >
                                <path
                                    d="M18 9.14014H17.87C15.98 9.07467 14.57 7.48165 14.57 5.51765C14.57 3.51 16.07 1.88425 17.9 1.88425C19.73 1.88425 21.23 3.52091 21.23 5.51765C21.2312 6.46109 20.8958 7.368 20.2947 8.04622C19.6937 8.72445 18.8742 9.12071 18.01 9.15105C18.01 9.14014 18.01 9.14014 18 9.14014ZM17.9 3.51C16.89 3.51 16.07 4.40471 16.07 5.50674C16.07 6.58694 16.84 7.45983 17.83 7.50347C17.84 7.49256 17.92 7.49256 18.01 7.50347C18.4835 7.4694 18.9264 7.2362 19.2455 6.85297C19.5646 6.46973 19.7349 5.96636 19.7206 5.44884C19.7064 4.93131 19.5086 4.44001 19.1691 4.07837C18.8295 3.71674 18.3745 3.51298 17.9 3.51ZM18.009 17.1794C17.619 17.1794 17.229 17.1467 16.839 17.0703C16.7417 17.0519 16.6488 17.0127 16.5654 16.9549C16.4821 16.8972 16.41 16.8221 16.3534 16.7339C16.2967 16.6457 16.2565 16.5462 16.2352 16.441C16.2139 16.3358 16.2117 16.2271 16.229 16.1211C16.2459 16.0149 16.2818 15.9135 16.3348 15.8226C16.3877 15.7317 16.4565 15.653 16.5373 15.5912C16.6182 15.5293 16.7094 15.4855 16.8058 15.4622C16.9022 15.439 17.0018 15.4367 17.099 15.4555C18.329 15.6846 19.629 15.4337 20.499 14.8008C20.969 14.4626 21.219 14.037 21.219 13.6115C21.219 13.186 20.959 12.7714 20.499 12.4331C19.629 11.8003 18.309 11.5493 17.069 11.7894C16.659 11.8766 16.269 11.5711 16.199 11.1238C16.129 10.6764 16.399 10.2509 16.809 10.1745C18.439 9.85809 20.129 10.1963 21.329 11.0692C22.209 11.713 22.719 12.6295 22.719 13.6115C22.719 14.5826 22.219 15.51 21.329 16.1647C20.419 16.8194 19.239 17.1794 18.009 17.1794ZM5.97 9.13795H5.95C5.08726 9.10849 4.26886 8.714 3.66792 8.03794C3.06697 7.36188 2.73062 6.45727 2.73 5.51547C2.73 3.50782 4.23 1.87115 6.06 1.87115C7.89 1.87115 9.39 3.50782 9.39 5.50455C9.39 7.47947 7.98 9.07249 6.18 9.13795L5.97 8.31962L6.04 9.13795H5.97ZM6.07 7.50129C6.13 7.50129 6.18 7.50129 6.24 7.5122C7.13 7.46855 7.91 6.59567 7.91 5.51547C7.90947 5.12532 7.80419 4.7439 7.60719 4.41832C7.41018 4.09273 7.13007 3.83725 6.80147 3.68344C6.47287 3.52963 6.11017 3.48422 5.75818 3.55284C5.40618 3.62145 5.08033 3.80107 4.82086 4.06951C4.56139 4.33795 4.37968 4.68344 4.29818 5.06332C4.21667 5.44319 4.23895 5.84079 4.36225 6.207C4.48555 6.57321 4.70448 6.89199 4.99198 7.12395C5.27949 7.3559 5.62297 7.49088 5.98 7.5122C5.99 7.50129 6.03 7.50129 6.07 7.50129ZM5.96 17.1794C4.73 17.1794 3.55 16.8194 2.64 16.1647C1.76 15.521 1.25 14.5935 1.25 13.6115C1.25 12.6404 1.76 11.713 2.64 11.0692C3.84 10.1963 5.53 9.85809 7.16 10.1745C7.57 10.2509 7.84 10.6764 7.77 11.1238C7.7 11.5711 7.31 11.8766 6.9 11.7894C5.66 11.5493 4.35 11.8003 3.47 12.4331C3 12.7714 2.75 13.186 2.75 13.6115C2.75 14.037 3.01 14.4626 3.47 14.8008C4.34 15.4337 5.64 15.6846 6.87 15.4555C7.28 15.3791 7.67 15.6846 7.74 16.1211C7.81 16.5684 7.54 16.994 7.13 17.0703C6.74 17.1467 6.35 17.1794 5.96 17.1794ZM12 17.2886H11.87C9.98 17.2231 8.57 15.6301 8.57 13.6661C8.57 11.6584 10.07 10.0327 11.9 10.0327C13.73 10.0327 15.23 11.6693 15.23 13.6661C15.2312 14.6095 14.8958 15.5164 14.2947 16.1946C13.6937 16.8729 12.8742 17.2691 12.01 17.2995C12.01 17.2886 12.01 17.2886 12 17.2886ZM11.9 11.6584C10.89 11.6584 10.07 12.5531 10.07 13.6552C10.07 14.7354 10.84 15.6082 11.83 15.6519C11.84 15.641 11.92 15.641 12.01 15.6519C12.98 15.5973 13.73 14.7244 13.74 13.6552C13.74 12.564 12.92 11.6584 11.9 11.6584ZM12.001 25.3399C10.801 25.3399 9.601 25.0016 8.671 24.3142C7.791 23.6705 7.281 22.7539 7.281 21.7719C7.281 20.8008 7.781 19.8625 8.671 19.2187C10.541 17.8658 13.471 17.8658 15.331 19.2187C16.211 19.8625 16.721 20.779 16.721 21.761C16.721 22.7321 16.221 23.6705 15.331 24.3142C14.401 24.9907 13.201 25.3399 12.001 25.3399ZM9.501 20.5935C9.031 20.9318 8.781 21.3573 8.781 21.7828C8.781 22.2084 9.041 22.623 9.501 22.9612C10.851 23.9542 13.141 23.9542 14.491 22.9612C14.961 22.623 15.211 22.1975 15.211 21.7719C15.211 21.3464 14.951 20.9318 14.491 20.5935C13.151 19.6006 10.861 19.6115 9.501 20.5935Z"
                                    fill="currentColor"
                                />
                            </svg>
                            <span class="text">Quản lí SV</span>
                        </a>
                    </li>
                    <li data-name="lecturer">
                        <a class="item" href="/admin/lecturer">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="19"
                                height="23"
                                viewBox="0 0 19 23"
                                fill="none"
                                class="icon"
                            >
                                <path
                                    d="M5.43542 13.0176C5.26452 13.9551 4.58581 18.3252 4.38562 19.5606C4.37097 19.6484 4.33679 19.6826 4.23913 19.6826H0.596556C0.225462 19.6826 -0.0430923 19.3604 0.00573583 19.0039L2.86706 0.844737C2.94031 0.375987 3.36023 0.0195421 3.84363 0.0195421C11.2801 0.0195421 11.9051 -0.161122 13.8046 0.576183C16.7391 1.71388 17.0077 4.45802 15.953 7.42677C14.9032 10.4834 12.413 11.7969 9.11218 11.8359C6.99304 11.8701 5.71863 11.4942 5.43542 13.0176ZM17.4325 5.99122C17.3446 5.92774 17.3104 5.90333 17.286 6.0547C17.1884 6.61134 17.037 7.15333 16.8563 7.69532C14.9081 13.252 9.50769 12.7686 6.87097 12.7686C6.57312 12.7686 6.37781 12.9297 6.33874 13.2275C5.23523 20.083 5.0155 21.5137 5.0155 21.5137C4.96667 21.8604 5.1864 22.1436 5.53308 22.1436H8.63366C9.05359 22.1436 9.40027 21.8359 9.48327 21.416C9.51745 21.1524 9.42956 21.7139 10.1864 16.958C10.411 15.8838 10.8846 15.9961 11.6171 15.9961C15.0839 15.9961 17.7889 14.5899 18.5946 10.5127C18.912 8.81349 18.8192 7.02638 17.4325 5.99122Z"
                                    fill="currentColor"
                                />
                            </svg>
                            <span class="text">Quản lí GV</span>
                        </a>
                    </li>
                    <li data-name="monhoc">
                        <a class="item" href="/admin/subject">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="24"
                                height="27"
                                viewBox="0 0 24 27"
                                fill="none"
                                class="icon"
                            >
                                <path
                                    d="M15 25.3561H9C3.57 25.3561 1.25 22.8247 1.25 16.9V10.3533C1.25 4.42859 3.57 1.89722 9 1.89722H14C14.41 1.89722 14.75 2.26819 14.75 2.71555C14.75 3.16291 14.41 3.53388 14 3.53388H9C4.39 3.53388 2.75 5.32331 2.75 10.3533V16.9C2.75 21.93 4.39 23.7194 9 23.7194H15C19.61 23.7194 21.25 21.93 21.25 16.9V11.4444C21.25 10.9971 21.59 10.6261 22 10.6261C22.41 10.6261 22.75 10.9971 22.75 11.4444V16.9C22.75 22.8247 20.43 25.3561 15 25.3561Z"
                                    fill="currentColor"
                                />
                                <path
                                    d="M22 12.2606H18C14.58 12.2606 13.25 10.8094 13.25 7.07777V2.71333C13.25 2.386 13.43 2.08048 13.71 1.96046C13.99 1.82953 14.31 1.90591 14.53 2.13504L22.53 10.8639C22.6343 10.9786 22.7052 11.1243 22.7338 11.2828C22.7624 11.4412 22.7474 11.6054 22.6908 11.7546C22.6342 11.9038 22.5384 12.0315 22.4155 12.1215C22.2926 12.2115 22.148 12.2599 22 12.2606ZM14.75 4.68824V7.07777C14.75 9.89284 15.42 10.6239 18 10.6239H20.19L14.75 4.68824Z"
                                    fill="currentColor"
                                />
                            </svg>
                            <span class="text">Quản lí môn học</span>
                        </a>
                    </li>
                    <li>
                        <a class="item" href="/logout">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="22"
                                viewBox="0 0 20 22"
                                fill="none"
                            >
                                <path
                                    d="M13.6 15.4029C13.29 19.3309 11.44 20.9348 7.39 20.9348H7.26C2.79 20.9348 1 18.9817 1 14.1045V6.99041C1 2.11315 2.79 0.160059 7.26 0.160059H7.39C11.41 0.160059 13.26 1.74217 13.59 5.6047M7.5 10.5583L18.88 10.5583M16.65 14.2136L20 10.5583L16.65 6.90313"
                                    stroke="currentColor"
                                    stroke-width="1.5"
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                />
                            </svg>
                            <span class="text">Sign Out</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>

        <!-- PC controller wrapper -->
        <div class="controller-wrapper">
            <div class="logo-wrapper">
                <img
                    src="../static/assets/img/multi-dot.svg"
                    alt=""
                    th:src="@{/assets/img/multi-dot.svg}"
                />
                <span class="admin-text">Admin</span>
            </div>
            <ul class="feature-list"></ul>
        </div>
        <div class="header">
            <div class="user-wrapper">
                <i class="fa-solid fa-bars menu"></i>
                <span class="text">Hello, Quang!</span>
                <div class="img-wrapper">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                    >
                        <path
                            fill-rule="evenodd"
                            clip-rule="evenodd"
                            d="M12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4ZM15.641 12.7694C17.075 11.673 18 9.94452 18 8C18 4.68629 15.3137 2 12 2C8.68629 2 6 4.68629 6 8C6 9.94452 6.92501 11.673 8.35901 12.7694C7.35354 13.2142 6.4285 13.8436 5.63604 14.636C5.02411 15.248 4.50935 15.939 4.10177 16.6851C3.34966 18.0619 3.65638 19.4657 4.50339 20.4584C5.3188 21.414 6.62502 22 8 22H16C17.375 22 18.6812 21.414 19.4966 20.4584C20.3436 19.4657 20.6503 18.0619 19.8982 16.6851C19.4907 15.939 18.9759 15.248 18.364 14.636C17.5715 13.8436 16.6465 13.2142 15.641 12.7694ZM12 14C10.1435 14 8.36301 14.7375 7.05025 16.0503C6.57425 16.5263 6.17394 17.0637 5.85696 17.6439C5.54999 18.2058 5.64902 18.7198 6.02481 19.1602C6.4322 19.6376 7.16584 20 8 20H16C16.8342 20 17.5678 19.6376 17.9752 19.1602C18.351 18.7198 18.45 18.2058 18.143 17.6439C17.8261 17.0637 17.4258 16.5263 16.9497 16.0503C15.637 14.7375 13.8565 14 12 14Z"
                            fill="white"
                        />
                    </svg>
                </div>
            </div>
        </div>
        <script>
            const mobileController =
                document.querySelector(".mobile-controller");
            const mobileOverlay = document.querySelector(".mobile-overlay");
            document.querySelector(".mobile-controller");
            const menuBtn = document.querySelector(".user-wrapper .menu");
            const featureListMobile =
                mobileController.querySelector(".feature-list");
            console.log(featureListMobile);
            const featureListPc = document.querySelector(
                ".controller-wrapper .feature-list"
            );
            const featureItems = document.querySelectorAll(
                ".mobile-controller .feature-list .item"
            );
            featureListPc.innerHTML = featureListMobile.innerHTML;
            menuBtn.addEventListener("click", () => {
                mobileController.classList.add("active");
                mobileOverlay.classList.add("active");
            });
            mobileOverlay.addEventListener("click", () => {
                mobileController.classList.remove("active");
                mobileOverlay.classList.remove("active");
            });
            featureItems.forEach((item) => {
                item.onclick = function () {
                    mobileController.classList.remove("active");
                    mobileOverlay.classList.remove("active");
                };
            });
        </script>
        <div class="content">
            <div
                class="content-wrapper"
                data-name="student"
                style="display: block;"
            >
                <div class="content-top">
                    <span class="text">Students</span>
                    <select id="classSelect" name="classes" style="width: 40%;">
                        <option value="" selected disabled>Chọn lớp</option>
                        <div th:each = "class:${listOfClass}" >
                            <option
                            th:if = "${#strings.trim(class.maLop)} == ${selectedMaLop}"
                            th:value = "${class.maLop}" 
                            selected
                            th:text=" 'LỚP: ' +${class.tenLop}" >
                            </option>
                            <option
                            th:unless = "${#strings.trim(class.maLop)} == ${selectedMaLop}"
                            th:value = "${class.maLop}" 
                            th:text=" 'LỚP: ' +${class.tenLop}" >
                            </option>
                        </div>
                    </select>
                </div>
                <div class="content-bottom" style=" width: 128%;"> 
                    <div class="find-wrapper">
                        <label for="search">Entries</label>
                        <div class="search-wrapper" >
                            <img
                                src="../static/assets/img/search-icon.svg"
                                th:src="@{/assets/img/search-icon.svg}"
                                alt=""
                            />
                            <input
                                type="text"
                                name=""
                                id="search"
                                placeholder="Search..."
                            />
                        </div>
                        <!-- Button tìm kiếm -->
                        <!-- <button id = "search-button" class="search-button">Tìm kiếm</button> -->
                    </div>
                    <table class="table">
                        <thead style="position: sticky; top:0;">
                            <tr>
                                <th style="background-color:rgb(49, 200, 246);" data-name="maGv">Mã sinh viên</th>
                                <th style="background-color:rgb(49, 200, 246);" data-name="ho">Họ</th>
                                <th style="background-color:rgb(49, 200, 246);" data-name="ten">Tên</th>
                                <th style="background-color:rgb(49, 200, 246);" data-name="gioiTinh">Giới tính</th>
                                <th style="background-color:rgb(49, 200, 246);" data-name="diaChi">Địa chỉ</th>
                                <th style="background-color:rgb(49, 200, 246);" data-name="ngaySinh">Ngày sinh</th>
                                <th style="background-color:rgb(49, 200, 246);" data-name="email">Email</th>
                                <th style="background-color:rgb(49, 200, 246);" data-name="action">Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each = "student: ${listOfStudent}">
                                <td th:text ="${student.masv}"></td>
                                <td th:text = "${student.ho}"></td>
                                <td th:text = "${student.ten}"></td>
                                <td th:if = "${student.isGioiTinh() == false}">Nam</td>
                                <td th:unless = "${student.isGioiTinh() == false}">Nữ</td>
                                <td th:text = "${student.diaChi}"></td>
                                <td th:text = "${student.ngaySinh}"></td>
                                <td th:text = "${student.email}"></td>
                                <td>
                                    <i
                                        class="fa-solid fa-pen-to-square edit"
                                    ></i>
                                    <!-- th:href="@{/admin/deleteMonHoc/{mamh}(mamh=${monHoc.mamh})}" -->
                                    <form th:action="@{/admin/deleteStudent}" method="post">
                                        <input type="hidden" th:name = "masv" th:value = "${student.masv}">
                                        <input type="hidden" th:name = "maLop" th:value = "${selectedMaLop}">
                                        <button>
                                            
                                            <i
                                                class="fa-solid fa-trash trash"
                                            ></i>
                                        </button>
                                    </form>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- <div class="table-controller">
                        <span class="text">Previous</span>
                        <div class="page-number">
                            <span class="item">1</span>
                            <span class="item">2</span>
                            <span class="item">3</span>
                        </div>
                        <span class="text"> Next</span>
                    </div> -->
                </div>
                <a href="#!" class="btn-trans btn-register" style="position: sticky; bottom:0">
                    <div class="circle">
                        <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="17"
                            height="17"
                            viewBox="0 0 17 17"
                            fill="none"
                        >
                            <path
                                d="M15.7857 6.67857H10.3214V1.21429C10.3214 0.543772 9.77766 0 9.10714 0H7.89286C7.22234 0 6.67857 0.543772 6.67857 1.21429V6.67857H1.21429C0.543772 6.67857 0 7.22234 0 7.89286V9.10714C0 9.77766 0.543772 10.3214 1.21429 10.3214H6.67857V15.7857C6.67857 16.4562 7.22234 17 7.89286 17H9.10714C9.77766 17 10.3214 16.4562 10.3214 15.7857V10.3214H15.7857C16.4562 10.3214 17 9.77766 17 9.10714V7.89286C17 7.22234 16.4562 6.67857 15.7857 6.67857Z"
                                fill="currentColor"
                            ></path>
                        </svg>
                    </div>
                    <span>Thêm sinh viên</span>
                </a>
                <a href="#!" class="btn-trans btn-register" style="position: sticky; bottom:0; margin: 100px;">
                    <div class="circle" >
                    <svg 
                        fill="#000000" 
                        width="17"
                        height="17" 
                        version="1.1" 
                        id="Capa_1" 
                        xmlns="http://www.w3.org/2000/svg" 
                        xmlns:xlink="http://www.w3.org/1999/xlink" 
                        viewBox="0 0 75.294 75.294" xml:space="preserve"
                    >
                       <g>
                           <path d="M66.097,12.089h-56.9C4.126,12.089,0,16.215,0,21.286v32.722c0,5.071,4.126,9.197,9.197,9.197h56.9 c5.071,0,9.197-4.126,9.197-9.197V21.287C75.295,16.215,71.169,12.089,66.097,12.089z M61.603,18.089L37.647,33.523L13.691,18.089 H61.603z M66.097,57.206h-56.9C7.434,57.206,6,55.771,6,54.009V21.457l29.796,19.16c0.04,0.025,0.083,0.042,0.124,0.065 c0.043,0.024,0.087,0.047,0.131,0.069c0.231,
                           0.119,0.469,0.215,0.712,0.278c0.025,0.007,0.05,0.01,0.075,0.016 c0.267,0.063,0.537,0.102,0.807,0.102c0.001,0,0.002,0,0.002,0c0.002,0,0.003,0,0.004,0c0.27,0,0.54-0.038,0.807-0.102 c0.025-0.006,0.05-0.009,0.075-0.016c0.243-0.063,0.48-0.159,0.712-0.278c0.044-0.022,0.088-0.045,0.131-0.069 c0.041-0.023,0.084-0.04,0.124-0.065l29.796-19.16v32.551C69.295,55.771,67.86,57.206,66.097,57.206z"/>
                       </g>
                   </svg>
                    </div>
                    <span>Gửi mail</span>
                </a>
                <a href="#!" class="btn-trans btn-register" style="position: sticky; bottom:0;display:none;" >
                    <div class="circle">
                        <svg width="17" height="17" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10.3009 13.6949L20.102 3.89742M10.5795 14.1355L12.8019 18.5804C13.339 19.6545 13.6075 20.1916 13.9458 20.3356C14.2394 20.4606 14.575 20.4379 14.8492 20.2747C15.1651 20.0866 15.3591 19.5183 15.7472 18.3818L19.9463 6.08434C20.2845 5.09409 20.4535 4.59896 20.3378 4.27142C20.2371 3.98648 20.013 3.76234 19.7281 3.66167C19.4005 3.54595 18.9054 3.71502 17.9151 4.05315L5.61763 8.2523C4.48114 8.64037 3.91289 8.83441 3.72478 9.15032C3.56153 9.42447 3.53891 9.76007 3.66389 10.0536C3.80791 10.3919 4.34498 10.6605 5.41912 11.1975L9.86397 13.42C10.041 13.5085 10.1295 13.5527 10.2061 13.6118C10.2742 13.6643 10.3352 13.7253 10.3876 13.7933C10.4468 13.87 10.491 13.9585 10.5795 14.1355Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <form 
                        id = "sendemail"
                        th:action="@{/admin/sendemail}" 
                        action = "/admin/sendemail"
                        method="post"
                        th:object="${EmailDTO}"
                    >
                        <div th:each = "email,itemStat:*{listEmail}" style="display: none;">
                            <input type="text"
                            readonly 
                            th:field = "*{listEmail[__${itemStat.index}__]}"
                            >
                        </div>
                    <!-- <button
                        id="btnEmail" 
                        type="submit"
                        style="background-color: inherit;border: none;color: inherit; font-size:inherit;width: 100px;"
                    >
                        Gửi
                    </button> -->
                    </form>
                    Gửi
                </a>
            </div>
        </div>

        <!-- Modal -->
        <div class="modal">
            <div class="modal-container" data-name="student">
                <div class="header">Register</div>
                <form th:action="@{/admin/addNewStudent}"
                      class="register-form"
                      th:object = "${student}"
                      method="post">
                    <div class="form-wrapper">
                        <div class="input-wrapper">
                            <label for="lastname">Họ</label>
                            <input
                                type="text"
                                placeholder=""
                                name="lastname"
                                id="lastname"
                                autocomplete="nope"
                                rules="required"
                                th:field = "*{ho}"
                            />
                            <div class="bar"></div>
                        </div>
                        <span class="error-message" th:if="${#fields.hasErrors('ho')}" th:errors="*{ho}"style="color:red; font-style: italic;"></span>
                        <span th:unless="${#fields.hasErrors('ho')}"  style="color:red; font-style: italic;"></span>
                        <!-- <span class="form-message"></span> -->
                        <div class="input-wrapper">
                            <label for="firstname">Tên</label>
                            <input
                                type="text"
                                placeholder=""
                                name="firstname"
                                id="firstname"
                                autocomplete="nope"
                                rules="required"
                                th:field = "*{ten}"
                            />
                            <div class="bar"></div>
                        </div>
                        <span class="error-message" th:if="${#fields.hasErrors('ten')}" th:errors="*{ten}"style="color:red; font-style: italic;"></span>
                    </div>
                    <div class="input-wrapper">
                        <label for="username">User Name</label>
                        <input
                            type="text"
                            placeholder=""
                            name="username"
                            id="username"
                            autocomplete="nope"
                            rules="required"
                            th:field = "*{userName}"
                        />
                        <div class="bar"></div>
                    </div>
                    <span class="error-message" th:if="${#fields.hasErrors('userName')}" th:errors="*{userName}"style="color:red; font-style: italic;"></span>
                    <div class="input-wrapper">
                        <label for="password">Password</label>
                        <input
                            type="password"
                            placeholder=""
                            name="password"
                            id="password"
                            rules="required|min:6"
                            th:field = "*{passWord}"
                        />
                        <div class="bar"></div>
                    </div>
                    <span class="error-message" th:if="${#fields.hasErrors('passWord')}" th:errors="*{passWord}"style="color:red; font-style: italic;"></span>
                    <!-- <div class="input-wrapper">
                        <label for="confirm-password-student"
                            >Confirm Password</label
                        >
                        <input
                            type="text"
                            placeholder=""
                            name="confirm-password"
                            id="confirm-password-student"
                            rules="required|confirmPassword"
                        />
                        <div class="bar"></div>
                    </div> -->
                    <span class="form-message"></span>
                    <div class="box-wrapper">
                        <input
                            type="radio"
                            name="gender"
                            id="male"
                            value="false"
                            th:field = "*{gioiTinh}"
                            checked
                        />
                        <label for="male" checked>Nam</label>
                        <input
                            type="radio"
                            name="gender"
                            id="female"
                            value="true"
                            th:field = "*{gioiTinh}"
                        />
                        <label for="female">Nữ</label>
                    </div>
                    <div class="input-wrapper">
                        <label for="address">Địa chỉ</label>
                        <input
                            type="text"
                            placeholder=""
                            name="address"
                            id="address"
                            rules="required"
                            th:field = "*{diaChi}"
                        />
                        <div class="bar"></div>
                    </div>
                    <span class="error-message" th:if="${#fields.hasErrors('diaChi')}" th:errors="*{diaChi}"style="color:red; font-style: italic;"></span>
                    <div class="input-wrapper">
                        <label for="masv">Mã Sinh Viên</label>
                        <input
                            type="text"
                            placeholder=""
                            name="address"
                            id="masv"
                            rules="required"
                            th:field = "*{masv}"
                        />
                        <div class="bar"></div>
                    </div>
                    <span class="error-message" th:if="${#fields.hasErrors('masv')}" th:errors="*{masv}"style="color:red; font-style: italic;"></span>
                    <div class="input-wrapper">
                        <label for="class">Chọn lớp:</label>
                        <input
                            type="text"
                            placeholder=""
                            name="class"
                            id="class"
                            rules="required"
                            th:field = "*{lop.maLop}"
                        />
                    </div>
                    <!-- <span class="form-message"></span> -->
                    <div class="input-wrapper">
                        <label for="birthday-student">Ngày sinh</label>
                        <input
                            type="date"
                            name="birthday"
                            id="birthday-student"
                            rules="required"
                            th:field = "*{ngaySinh}"
                        />
                    </div>
                    <span class="error-message" th:if="${#fields.hasErrors('ngaySinh')}" th:errors="*{ngaySinh}"style="color:red; font-style: italic;"></span>
                    <div class="input-wrapper">
                        <label for="m-email">Email</label>
                        <input
                            type="email"
                            name="m-email"
                            id="m-email"
                            rules="required"
                            th:field = "*{email}"
                        />
                    </div>
                    <span class="error-message" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"style="color:red; font-style: italic;"></span>
                    <div class="btn-controller">
                        <button
                            type="submit"
                            href="#!"
                            class="btn registerSubmitBtn"
                        >
                            Register
                        </button>
                        <a href="#!" class="btn-trans closeBtn">Close</a>
                    </div>
                </form>
            </div>
            <div class="modal-container" data-name="m-student">
                <div class="header">Register</div>
                <form th:action="@{/admin/editStudent}" 
                    class="register-form" 
                    th:object = "${editStudent}"
                    method="post">
                    <div class="form-wrapper">
                        <div class="input-wrapper">
                            <label for="m-lastname">Họ</label>
                            <input
                                type="text"
                                placeholder=""
                                name="lastname"
                                id="m-lastname"
                                autocomplete="nope"
                                rules="required"
                                th:field = "*{ho}"
                                />
                                <div class="bar"></div>
                            </div>
                            <span th:if="${#fields.hasErrors('ho')}" th:errors="*{ho}" style="color:red; font-style: italic;"></span>
                            <span th:unless="${#fields.hasErrors('ho')}"  style="color:red; font-style: italic;"></span>
                            <div class="input-wrapper">
                                <label for="m-firstname">Tên</label>
                                <input
                                type="text"
                                placeholder=""
                                name="mfirstname"
                                id="m-firstname"
                                autocomplete="nope"
                                rules="required"
                                th:field = "*{ten}"
                                />
                                <div class="bar"></div>
                            </div>
                            <span class="error-message" th:if="${#fields.hasErrors('ten')}" th:errors="*{ten}"style="color:red; font-style: italic;"></span>
                    </div>
                    <div class="box-wrapper"> 
                        <input
                            type="radio"
                            name="gender"
                            id="m-male"
                            value="false"
                            th:field = "*{gioiTinh}"
                        />
                        <label for="m-male" checked>Nam</label>
                        <input
                            type="radio"
                            name="gender"
                            id="m-female"
                            value="true"
                            th:field = "*{gioiTinh}"
                        />
                        <label for="m-female">Nữ</label>
                    </div>
                    <div class="input-wrapper">
                        <label for="m-address">Địa chỉ</label>
                        <input
                            type="text"
                            placeholder=""
                            name="m-address"
                            id="m-address"
                            rules="required"
                            th:field = "*{diaChi}"
                        />
                        <div class="bar"></div>
                    </div>
                    <span class="error-message" th:if="${#fields.hasErrors('diaChi')}" th:errors="*{diaChi}" style="color:red; font-style: italic;"></span>
                    <!-- <span class="form-message"></span> -->
                    <div class="input-wrapper">
                        <label for="m-masv">Mã Sinh Viên</label>
                        <input
                            type="text"
                            placeholder=""
                            name="m-masv"
                            id="m-masv"
                            rules="required"
                            th:field = "*{masv}"
                            readonly
                        />
                        <div class="bar"></div>
                    </div>
                    <div class="input-wrapper">
                        <label for="m-class">Chọn lớp:</label>
                        <input
                            type="text"
                            placeholder=""
                            name="m-class"
                            id="m-class"
                            rules="required"
                            th:field = "*{lop.maLop}"
                            readonly
                        />
                    </div>
                    <span class="form-message"></span>
                    <div class="input-wrapper">
                        <label for="m-birthday">Ngày sinh</label>
                        <input
                            type="date"
                            name="m-birthday"
                            id="m-birthday"
                            rules="required"
                            th:field = "*{ngaySinh}"
                        />
                    </div>
                    <span class="error-message" th:if="${#fields.hasErrors('ngaySinh')}" th:errors="*{ngaySinh}" style="color:red; font-style: italic;"></span>
                    <div class="input-wrapper">
                        <label for="m-email">Email</label>
                        <input
                            type="text"
                            name="m-email"
                            id="m-email"
                            rules="required"
                            th:field = "*{email}"
                            />
                            <!-- readonly -->
                    </div>
                    <!-- <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}">cccc</span> -->
                    <span class="form-message"></span>
                    <div class="btn-controller">
                        <button
                            type="submit"
                            href="#!"
                            class="btn registerSubmitBtn"
                        >
                            Register
                        </button>
                        <a href="#!" class="btn-trans closeBtn">Close</a>
                    </div>
                </form>
            </div>
        </div>
        <!-- Script -->
        <script
            th:src="@{/javascript/toast.js}"
            src="../../static/javascript/toast.js"
        ></script>
        <script
            th:src="@{/javascript/XuLyTable.js}"
            src="../../static/javascript/XuLyTable.js"
        ></script>
        <script
            type = "module"
            th:src="@{/javascript/admin/QuanLySinhVien.js}"
            src="../../static/javascript/admin/QuanLySinhVien.js"
        ></script>
        
        <script th:inline="javascript"> 
            function openModal(modalContainer){
                const modal = document.querySelector(".modal");
                modal.classList.add("open");
                modalContainer.classList.add("open");
                modalContainer.addEventListener("click", (event) =>
                event.stopPropagation()
                );
                modal.addEventListener("click", () => closeModal(modalContainer));
                const closeBtn = modalContainer.querySelector(`.closeBtn`);
                if (!closeBtn) return;
                closeBtn.addEventListener("click", () => closeModal(modalContainer));
            }
            function closeModal(modalContainer) {
                const modal = document.querySelector(".modal");
                modal.classList.remove("open");
                modalContainer.classList.remove("open");
            }   
            var message = /*[[${message}]]*/ null;
            var emailsError = /*[[${emailsError}]]*/ null;
            const modalContainer = document.querySelector(
                ".modal-container[data-name='m-student']"
            );
            const formAddNewStudent = document.querySelector(
                ".modal-container[data-name='student']"
            );
            if(emailsError!=null){
                toast({
                        type: "error",
                        title: "Lỗi gửi mail!",
                        message: message,
                        duration: 3000,
                    });
                console.log("email "+emailsError);
                const listSinhVien = document.querySelectorAll("tbody tr");
                listSinhVien.forEach((row) => {
                    const editBtn = row.querySelector(".edit");
                    const colums = row.querySelectorAll("td");
                    console.log(colums[6].textContent)
                    if(emailsError.includes(colums[6].textContent)){
                        console.log("có")
                        row.style.background = "#ffadad";

                    }
                });
            }
            if(message!=null){
                if(message === "Sinh viên đã đăng ký thi không thể xóa"){
                    toast({
                            type: "error",
                            title: "Thất bại!",
                            message: "Sinh viên đã đăng ký thi không thể xóa",
                            duration: 3000,
                        });
                }
                if(message.includes("thành công")){
                    toast({
                        type: "success",
                        title: "Thành công!",
                        message: message,
                        duration: 3000,
                    });
                }
                if(message.includes("Sửa thất bại")){
                    toast({
                        type: "error",
                        title: "Thất bại",
                        message: message,
                        duration: 3000,
                    });
                    openModal(modalContainer)
                }
                if(message.includes("Thêm thất bại")){
                    toast({
                        type: "error",
                        title: "Thất bại",
                        message: message,
                        duration: 3000,
                    });
                    openModal(formAddNewStudent)
                }
            }
           
            // window.alert(message)
        </script>
        <script>
            // Hàm JavaScript để xử lý sự kiện khi người dùng chọn một lớp
            function redirect() {
                // Lấy giá trị đã chọn từ combobox
                var selectedValue = document.getElementById("classSelect").value;
        
                // Tạo URL chuyển hướng dựa trên giá trị đã chọn
                var redirectUrl = "/admin/student/" + selectedValue;
        
                // Chuyển hướng trình duyệt đến URL mới
                window.location.href = redirectUrl;
            }
            // Gán sự kiện onchange cho combobox để gọi hàm redirect() khi có sự thay đổi
            document.getElementById("classSelect").onchange = redirect;
        </script>
    </body>
</html>
